"use client";

import React, { useEffect, useRef } from "react";
import gsap from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";
import { DrawSVGPlugin } from "gsap/DrawSVGPlugin";

gsap.registerPlugin(ScrollTrigger, DrawSVGPlugin);

const SpringHome3 = ({ className }) => {
  const svgRef = useRef(null);
  const maskRef = useRef(null);

  useEffect(() => {
    const paths = svgRef.current.querySelectorAll("#maskReveal3 path");

    paths.forEach((originalPath) => {
      const clone = originalPath.cloneNode(true);
      clone.removeAttribute("stroke-dasharray");
      clone.setAttribute("stroke", "white");

      gsap.set(clone, { drawSVG: "0% 0%" }); // Start with nothing drawn
      maskRef.current.appendChild(clone);

      gsap.to(clone, {
        drawSVG: "0% 100%", // Animate from start to end (top to bottom)
        duration: 2,
        ease: "power1.inOut",
        scrollTrigger: {
          trigger: svgRef.current,
          start: "top 80%",
          toggleActions: "play none none none",
        },
      });
    });
  }, []);

  return (<svg width="94" height="71" ref={svgRef}
      className={className} viewBox="0 0 94 71" fill="none" xmlns="http://www.w3.org/2000/svg">
        <defs>
        <mask id="theMask3" maskUnits="userSpaceOnUse">
          <g ref={maskRef}></g>
        </mask>
      </defs>
      <g id="maskReveal3" mask="url(#theMask3)">
<path d="M54.3465 28.9252L53.3471 28.9615L53.3471 28.9615L54.3465 28.9252ZM46.0453 28.0925L45.0766 28.3407L46.0453 28.0925ZM77.7174 0.895693C77.9777 0.408592 78.5835 0.224725 79.0706 0.485015L87.0084 4.72669C87.4955 4.98698 87.6794 5.59286 87.4191 6.07996C87.1588 6.56706 86.5529 6.75093 86.0658 6.49064L79.01 2.72026L75.2396 9.77606C74.9794 10.2632 74.3735 10.447 73.8864 10.1867C73.3993 9.92645 73.2154 9.32057 73.4757 8.83346L77.7174 0.895693ZM78.5993 1.36699L79.5563 1.0766C79.7574 1.73928 79.9131 2.40487 80.026 3.0718L79.0401 3.23874L78.0541 3.40569C77.9552 2.82146 77.8187 2.23835 77.6424 1.65738L78.5993 1.36699ZM79.2075 7.07178L80.2046 7.14806C80.1019 8.49072 79.8465 9.82085 79.4629 11.1264L78.5035 10.8446L77.544 10.5627C77.8918 9.37904 78.1193 8.18681 78.2104 6.99551L79.2075 7.07178ZM77.1018 14.4209L78.0001 14.8604C77.4228 16.0402 76.7507 17.191 76.0027 18.3036L75.1728 17.7456L74.3429 17.1877C75.0445 16.1442 75.6698 15.0724 76.2036 13.9814L77.1018 14.4209ZM72.8438 20.8052L73.6045 21.4544C72.751 22.4544 71.8414 23.4126 70.8918 24.3207L70.2006 23.598L69.5095 22.8753C70.4126 22.0116 71.2755 21.1024 72.0832 20.1561L72.8438 20.8052ZM67.2979 26.119L67.9169 26.9044C66.8685 27.7307 65.7927 28.4964 64.7066 29.1922L64.1671 28.3502L63.6277 27.5082C64.6581 26.8481 65.6808 26.1203 66.6789 25.3336L67.2979 26.119ZM60.8218 30.2488L61.2651 31.1451C60.0219 31.76 58.784 32.2734 57.5769 32.6693L57.2652 31.7191L56.9536 30.7689C58.0603 30.4059 59.2103 29.9301 60.3784 29.3524L60.8218 30.2488ZM53.5249 32.5448L53.6228 33.54C52.1138 33.6885 50.676 33.5878 49.4018 33.1592L49.7207 32.2114L50.0395 31.2635C50.9774 31.579 52.1176 31.6785 53.427 31.5497L53.5249 32.5448ZM46.7739 29.8792L45.9166 30.3939C45.5521 29.7868 45.2715 29.1013 45.0766 28.3407L46.0453 28.0925L47.0141 27.8443C47.166 28.4371 47.3764 28.9399 47.6313 29.3645L46.7739 29.8792ZM46.0453 28.0925L45.0766 28.3407C44.9037 27.6657 44.7636 27.0297 44.6543 26.4314L45.638 26.2517L46.6217 26.0719C46.7219 26.6199 46.8516 27.2101 47.0141 27.8443L46.0453 28.0925ZM45.389 22.5339L44.3935 22.4391C44.5806 20.4722 45.403 19.018 46.8924 18.5558L47.1888 19.5108L47.4853 20.4659C47.1048 20.584 46.5356 21.0406 46.3845 22.6286L45.389 22.5339ZM50.6085 20.6292L51.251 19.8629C52.2048 20.6628 53.0919 21.7613 53.7942 23.0743L52.9124 23.546L52.0306 24.0176C51.4358 22.9056 50.7041 22.0144 49.9659 21.3954L50.6085 20.6292ZM54.1412 27.0665L55.1242 26.8833C55.2443 27.5276 55.3207 28.1976 55.3458 28.8889L54.3465 28.9252L53.3471 28.9615C53.3257 28.3705 53.2604 27.7987 53.1581 27.2497L54.1412 27.0665ZM54.3465 28.9252L55.3458 28.8889C55.3724 29.6215 55.3881 30.3392 55.3933 31.0424L54.3933 31.0497L53.3933 31.057C53.3883 30.3737 53.373 29.6753 53.3471 28.9615L54.3465 28.9252ZM54.2917 35.1902L55.2899 35.2489C55.2033 36.7231 55.0638 38.1238 54.8747 39.4536L53.8847 39.3128L52.8946 39.1719C53.0755 37.9003 53.2097 36.5544 53.2934 35.1315L54.2917 35.1902ZM53.0968 43.3733L54.0666 43.6173C53.7019 45.0671 53.2664 46.4139 52.7656 47.662L51.8376 47.2895L50.9095 46.9171C51.3743 45.7587 51.7827 44.4982 52.127 43.1294L53.0968 43.3733ZM49.9654 51.0087L50.8136 51.5384C50.0101 52.825 49.1151 53.9621 48.1407 54.9574L47.4261 54.2578L46.7115 53.5583C47.5808 52.6703 48.3872 51.648 49.1172 50.479L49.9654 51.0087ZM44.1971 56.8439L44.722 57.6951C43.465 58.4703 42.1345 59.0756 40.7511 59.5268L40.441 58.5761L40.1309 57.6253C41.3717 57.2207 42.557 56.6806 43.6722 55.9928L44.1971 56.8439ZM36.394 59.4358L36.5035 60.4297C35.0911 60.5854 33.6488 60.6133 32.194 60.5286L32.2521 59.5303L32.3102 58.532C33.6635 58.6108 34.9931 58.5841 36.2845 58.4418L36.394 59.4358ZM28.1375 58.9978L27.9439 59.9789C26.5655 59.7069 25.1876 59.3475 23.8235 58.912L24.1276 57.9594L24.4317 57.0068C25.7282 57.4207 27.0323 57.7605 28.331 58.0167L28.1375 58.9978ZM20.2457 56.4984L19.8479 57.4158C18.5511 56.8535 17.2783 56.2282 16.0416 55.55L16.5225 54.6732L17.0034 53.7964C18.1873 54.4458 19.4048 55.0438 20.6436 55.5809L20.2457 56.4984ZM12.9785 52.5149L12.42 53.3444C11.2304 52.5434 10.0912 51.6957 9.01638 50.8119L9.65151 50.0395L10.2866 49.2671C11.3109 50.1093 12.3988 50.919 13.537 51.6854L12.9785 52.5149ZM6.59724 47.2452L5.88204 47.9441C4.85038 46.8885 3.91362 45.7989 3.09246 44.6899L3.89614 44.0948L4.69981 43.4998C5.46149 44.5285 6.33788 45.549 7.31244 46.5463L6.59724 47.2452ZM1.7385 40.5608L0.836475 40.9924C0.512477 40.3154 0.236509 39.6346 0.0141316 38.9532L0.964789 38.643L1.91545 38.3327C2.10842 38.924 2.35085 39.5238 2.64052 40.1291L1.7385 40.5608Z" fill="#5943A5"/>
</g></svg>);
};

export default SpringHome3;